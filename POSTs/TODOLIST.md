4장 PIC 컨트롤러 이미지 413

> PIC 동작 방식
>
> PIC 컨트롤러는 내부에 8비트 크기의 IRR,ISR,IMR 레지스터가 있고, 레지스터의 각 비트는 PIC 컨트롤러에 연결된 8개의 인터럽트 핀에 대한 정보를 나타내며, 각 레지스터의 역할은 다음과 같다.
>
> - IRR(Interrupt Request Register) 레지스터는 외부 디바이스와 연결된 인터럽트 핀 중에서 인터럽트가 발생한 핀의 정보를 관리한다. 외부 디바이스가 인터럽트를 발생시키면 PIC 컨트롤러는 IRR 레지스터에 해당 비트를 1로 설정하여 인터럽트 발생 여부를 저장한다.
> - ISR(In_Service Register) 레지스터는 현재 인터럽트 핸들러가 실행 중인 인터럽트의 정보를 나타낸다. PIC 컨트롤러는 특별한 옵션을 사용하지 않는 한 IRQ 0에 가까울수록 우선순위를 높게 설정하므로 ISR 레지스터에 설정된 비트는 IRR 레지스터에 설정된 비트 중에서 비트 0에 가까운 비트와 같다.
> - IMR(Interrupt Mask Register) 레지스터는 비트가 1로 설정된 인터럽트 핀에서 발생한 인터럽트 요청을 무시하는 역할을 한다. 특정 디바이스의 인터럽트 신호를 무시하고 싶다면 IMR 레지스터의 해당 비트를 1로 설정하면 된다.
>
> PIC 컨트롤러와 프로세서는  INT 핀과 /INTA 핀으로 연결되어 있으며, 인터럽트 발생 여부와 처리 여부를 서로 알려준다. PIC 컨트롤러의 INT 핀은 프로세서의 INTR 핀과 직접 연결되어 있으며, 인터럽트가 발생했을 때 INT 핀에 신호를 발생시켜 프로세서가 인터럽트를 처리하게한다. /INTA 핀은 인터럽트가 프로세서에 잘 전달되었음을 PIC 컨트롤러에 알려주는 핀이다. 이처럼 프로세서와 PIC 컨트롤러는 INT와 /INTA 핀으로 서로에게 신호를 보내 인터럽트를 처리한다.

