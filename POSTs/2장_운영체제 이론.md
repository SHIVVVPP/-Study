

![Image](https://i.imgur.com/oCtWyvK.png)

# 2장 운영체제 이론

1. [프로세스](##프로세스)

2. [스레드](##스레드)
3. [스택](##스택)
4. [호출 규약](##호출 규약)

## 프로세스

프로세스는 컴퓨터에서 실행되는 프로그램을 의미한다.

> 일반적으로 프로그램은 하드 디스크에 저장되어 있는데,
>
> 프로그램을 실행하면 운영체제 로더에 의해 메모리에 적재된다.
>
> > 엄밀히 말하면 메모리에 적재되어 실행되는 프로그램을 "**프로세스**" 라고 한다.

![Image](https://i.imgur.com/fdhR2zY.png)

- 프로세스 컨텍스트 (Process Context)

  프로세스 문맥이라고도 하며, 운영체제가 관리하는 프로세스 정보이다.

  - CPU 상태
    - CPU 레지스터, 현재 프로세스가 수행되고 있는 위치 등 (IP : Instruction Pointer)
  - PCB (Process Control Block)
    - 커널이 관리하는 프로세스 정보 구조체
  - 가상주소공간 데이터
    - 코드, 데이터, 스택, 힙

- PCB (Process Control Block : 프로세스 제어 블록)

  운영체제 커널의 자료구조로써 프로세스를 표현하기 위해 사용된다.

  커널은 이 자료구조를 사용해 프로세스를 관리한다.

  PCB는 프로세스가 생성될 때 같이 생성되며 프로세스 고유의 정보를 포함한다.

  > WIN32 프로세스에서의 PCB 구조
  >
  > ![Image](https://i.imgur.com/v8M6gej.png)

  PCB는 체인으로 다른 PCB에 연결되어 있다.

  - OS가 관리상 사용하는 정보 : 
    - 프로세스 상태
    - 프로세스 ID
    - 스케줄링 정보
    - 우선순위
  - CPU 수행 관련 하드웨어 값 :
    - 프로그램 카운터, 레지스터
  - 메모리 정보
    - 코드
    - 데이터
    - 스택의 위치 정보
  - 파일정보
    - 열어둔 파일 정보 (Handle)

- 프로세스 상태

  컨텍스트 스위칭 (Context Switching)에 의해 프로세스는 실행 상태에 놓일 수도 있고, 정지상태에 놓일 수도 있다.

  > 프로세스 상태 다이어그램
  >
  > ![Image](https://i.imgur.com/pXvqKN3.png)
  >
  > | 프로세스 상태    | 내용                                                         |
  > | ---------------- | ------------------------------------------------------------ |
  > | 실행             | 프로세스가 CPU를 점유하고 있는 상태                          |
  > | 대기             | 프로세스가 CPU를 점유하기 위해 기다리고 있는 상태<br />(메모리에는 이미 올라와 있으며 CPU동작을 위한 모든 조건 또한 만족한 상태) |
  > | 블록(wait,sleep) | 당장은 작업이 수행될 수 없는 상태<br />sleep 함수를 사용하거나 동기화를 위해 대기해야 할 경우 프로세스가 블록된다. |
  > | 정지 상태        | 스케줄러나 인터럽트 때문에 비활성화된 상태<br /> 외부에서 다시 재개시켜야 활성화 상태로 변경된다. |

- 컨텍스트 스위칭

  CPU가 한 프로세스에서 다른 프로세스의 PCB 정보로 스위칭 되는 과정을 의미한다.![Image](https://i.imgur.com/dM4sIt3.png)
  
  컨텍스트 스위칭은 시스템 콜이나 외부 인터럽트에 의해 발생된다.
  
  두 프로세스는 컨텍스트 스위칭 발생 시, 위 과정을  반복하면서 실행과 중지를 반복한다.



## 스레드



## 스택



## 호출 규약

